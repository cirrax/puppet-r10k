# managed with puppet
---
# see https://github.com/puppetlabs/r10k/blob/main/doc/dynamic-environments/configuration.mkd
# for available options.

<% if @cachedir -%>
# The 'cachedir' setting controls where cached content is stored.
cacheddir: <%= @cachedir %>
<% end -%>

<% if @proxy -%>
# The 'proxy' setting configures HTTP/HTTPS proxy
proxy: <%= @proxy %>
<% end -%>

<% if @pool_size -%>
# Determine how many threads should be spawn while updating modules.
pool_size: <%= @pool_size %>
<% end -%>

<% if @deploy %>
# Top level setting for controlling how r10k deploys behave.
# (see: https://github.com/puppetlabs/r10k/blob/main/doc/dynamic-environments/configuration.mkd#deploy)
deploy:
  <%- @deploy.each do |key, val| -%>
  <%= key %>: <%= val %>
  <%- end -%>
<% end -%>

<% if @sources -%>
# The 'sources' setting determines what repositories r10k will use when creating
# Puppet environments.
# (see https://github.com/puppetlabs/r10k/blob/main/doc/dynamic-environments/configuration.mkd#source-options)
sources:
<% @sources.each do |key, val| -%>
  <%= key %>:
  <%- val.each do |k,v| -%>
    <%= k %>: <%= v %>
  <%- end -%>
<% end -%>
<% end -%>

<% if @git -%>
# git settings 
# (see https://github.com/puppetlabs/r10k/blob/main/doc/dynamic-environments/configuration.mkd)
git:
<% @git.each do |key, val| -%>
    <%= key %>: <%= val %>
<% end -%>
<% end -%>

<% if @forge -%>
# Configuration options for downloading modules from the Puppet Forge
# (see https://github.com/puppetlabs/r10k/blob/main/doc/dynamic-environments/configuration.mkd#forge)
forge:
<% @forge.each do |key, val| -%>
    <%= key %>: <%= val %>
<% end -%>
<% end -%>
